"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[143],{362:(e,t,r)=>{var n=r(7294),a=r(745);r(1249),r(9753),r(2526),r(1817),r(1539),r(2165),r(6992),r(8783),r(3948),r(7658),r(7042),r(8309),r(1038),r(4916),r(7601),r(1703),r(6647),r(6649),r(6078),r(9653),r(9070),r(7941),r(7327),r(5003),r(9554),r(4747),r(9337),r(3321);const l=function(e){return n.createElement("div",{className:"loader-cont",style:{height:e.height}},n.createElement("div",{className:"loader"}))};r(2222),r(3710),r(9720),r(3843),r(5268);var o=r(3138),c=(r(1637),r(2861)),i=function(e,t){return"".concat(s.host,"/api/restful/").concat(e)+(t?"/".concat(t):"")},s={host:"",create:function(e,t){return(0,c.Z)({method:"post",url:i(e),data:t,responseType:"json"}).then((function(e){return e.data}))},read:function(e,t){return(0,c.Z)({method:"get",url:i(e,t),responseType:"json"}).then((function(e){return e.data}))},update:function(e,t){return(0,c.Z)({method:"put",url:i(e,t.id),data:t,responseType:"json"}).then((function(e){return e.data}))},delete:function(e,t){return(0,c.Z)({method:"delete",url:i(e,t),responseType:"json"}).then((function(e){return e.data}))},getCollection:function(e,t){return(0,c.Z)({method:"get",url:i(e)+"?"+new URLSearchParams(t),responseType:"json"}).then((function(e){return e.data}))}};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],i=!0,s=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=null,b=function(e){},f=function(e,t){document.getElementById("bookEditModalLabel").innerText=e.id>0?"Edit book #"+e.id:"Create a book";var r=document.getElementById("bookEditForm");Object.entries(e).map((function(e){var t=m(e,2),n=t[0],a=t[1];r[n].value=a,r[n].readOnly=!0}));var n=e.published_at>0?1e3*e.published_at:Date.now();r.published_at.value=new Date(n).toISOString().substring(0,10),d.show(),b=t};const p=function(e){return(0,n.useEffect)((function(){d||(d=new o.u_(document.getElementById("bookEditModal")))}),[]),n.createElement("div",{className:"modal fade",id:"bookEditModal",tabIndex:-1,"aria-labelledby":"bookEditModalLabel","aria-hidden":"true"},n.createElement("div",{className:"modal-dialog"},n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"modal-header"},n.createElement("h1",{className:"modal-title fs-5",id:"bookEditModalLabel"}),n.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),n.createElement("div",{className:"modal-body"},n.createElement("form",{action:"assets/tsx/components/BookLayoutBlock/BookEditBlock#",id:"bookEditForm"},n.createElement("input",{type:"hidden",name:"id"}),n.createElement("div",{className:"row mb-3"},n.createElement("div",{className:"col-4"},n.createElement("label",{htmlFor:"title",className:"form-label"},"Title")),n.createElement("div",{className:"col-8"},n.createElement("input",{type:"text",className:"form-control",name:"title",placeholder:"Enter title"}))),n.createElement("div",{className:"row mb-3"},n.createElement("div",{className:"col-4"},n.createElement("label",{htmlFor:"publisher",className:"form-label"},"Publisher")),n.createElement("div",{className:"col-8"},n.createElement("input",{type:"text",className:"form-control",name:"publisher",placeholder:"Enter publisher"}))),n.createElement("div",{className:"row mb-3"},n.createElement("div",{className:"col-4"},n.createElement("label",{htmlFor:"author",className:"form-label"},"Author")),n.createElement("div",{className:"col-8"},n.createElement("input",{type:"text",className:"form-control",name:"author",placeholder:"Enter author"}))),n.createElement("div",{className:"row mb-3"},n.createElement("div",{className:"col-4"},n.createElement("label",{htmlFor:"genre",className:"form-label"},"Genre")),n.createElement("div",{className:"col-8"},n.createElement("input",{type:"text",className:"form-control",name:"genre",placeholder:"Enter genre"}))),n.createElement("div",{className:"row mb-3"},n.createElement("div",{className:"col-4"},n.createElement("label",{htmlFor:"published_at",className:"form-label"},"Published date")),n.createElement("div",{className:"col-8"},n.createElement("input",{type:"date",className:"form-control",name:"published_at",placeholder:"Enter published date"}))),n.createElement("div",{className:"row mb-3"},n.createElement("div",{className:"col-4"},n.createElement("label",{htmlFor:"words_amount",className:"form-label"},"Words amount")),n.createElement("div",{className:"col-8"},n.createElement("input",{type:"number",className:"form-control",name:"words_amount",placeholder:"Enter words amount"}))),n.createElement("div",{className:"row mb-3"},n.createElement("div",{className:"col-4"},n.createElement("label",{htmlFor:"price",className:"form-label"},"Price")),n.createElement("div",{className:"col-8"},n.createElement("input",{type:"number",min:"1",step:"0.01",className:"form-control",name:"price",placeholder:"Enter price"}))))),n.createElement("div",{className:"modal-footer"},n.createElement("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),n.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return function(){var e=document.getElementById("bookEditForm"),t=new FormData(e),r={};t.forEach((function(e,t){"published_at"===t?r.published_at=Date.parse(e)/1e3:r[t]=e}));var n=r.id>0?"update":"create";s[n]("Book",r).then((function(e){b(e),d.hide()}))}()}},"Save changes")))))};function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],i=!0,s=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const h=function(e){var t=[];return e.books.items.map((function(e,r){t.push(n.createElement("tr",{key:r}))})),n.createElement("div",{className:"books-list-block"},n.createElement("table",{className:"table table-dark table-striped table-bordered books-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("td",null,"idx"),n.createElement("td",null,"id"),n.createElement("td",null,"Title"),n.createElement("td",null,"Author"),n.createElement("td",null,"Publisher"),n.createElement("td",null,"Genre"),n.createElement("td",null,"Published"),n.createElement("td",null,"Price"),n.createElement("td",null,"Controls"))),n.createElement("tbody",null,e.books.items.map((function(t,r){var a=E((0,n.useState)(t),2),l=a[0],o=a[1],c=function(e){return e.success?o(e.item):null};return n.createElement("tr",{key:r,className:"book-row"},n.createElement("td",{className:"book-cell"},r+1),n.createElement("td",{className:"book-cell"},l.id),n.createElement("td",{className:"book-cell",style:{cursor:"pointer"},onClick:function(){return f(l,(function(){}),!0)}},n.createElement("strong",{title:l.title},l.title)),n.createElement("td",{className:"book-cell"},n.createElement("strong",{title:l.author},l.author)),n.createElement("td",{className:"book-cell"},l.publisher),n.createElement("td",{className:"book-cell"},l.genre),n.createElement("td",{className:"book-cell"},new Date(1e3*l.published_at).toDateString()),n.createElement("td",{className:"book-cell"},l.price),n.createElement("td",{className:"book-cell"},n.createElement("button",{className:"btn btn-primary",onClick:function(){return f(l,c)}},n.createElement("i",{className:"bi bi-pencil-fill"})," Edit"),"  ",n.createElement("button",{className:"btn btn-danger",onClick:function(){confirm("Really delete book #".concat(l.id,' "').concat(l.title,'"?'))&&s.delete("Book",l.id).then((function(t){t.success?confirm("".concat(t.message,"\nUpdate books from server?"))&&e.updateFromServer():alert(t.message)}))}},n.createElement("i",{className:"bi bi-trash-fill"})," Delete")))})))))};function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const N=function(e){var t=e.totalCount,r=e.perPage,a=e.pageNo,l=e.pageChange,o=e.paginationCount;if(!(t>0)||0===r)return null;var c,i,s=o>0?o:6,m=Math.ceil(t/r);s>=m&&(s=m);var u=Math.floor(s/2);return a<=u?(c=1,i=s):a>=m-u?(c=m-s+1,i=m):(c=a-u,i=a+u),n.createElement("nav",{className:"page-navigation"},n.createElement("ul",{className:"pagination"},a>1&&n.createElement("li",{className:"page-item"},n.createElement("span",{className:"page-link",onClick:function(){return l(a-1)}},"Prev")),1===a&&n.createElement("li",{className:"page-item disabled"},n.createElement("span",{className:"page-link"},"Prev")),c>1&&n.createElement("li",{className:"page-item"},n.createElement("span",{className:"page-link"},"...")),g(Array(s).keys()).map((function(e,t){return n.createElement("li",{key:t,className:"page-item"+(c+t===a?" active":"")},n.createElement("span",{className:"page-link",onClick:function(){return l(c+t)}},c+t))})),i<m&&n.createElement("li",{className:"page-item"},n.createElement("span",{className:"page-link"},"...")),a<m&&n.createElement("li",{className:"page-item"},n.createElement("span",{className:"page-link",onClick:function(){return l(a+1)}},"Next")),a===m&&n.createElement("li",{className:"page-item disabled"},n.createElement("span",{className:"page-link"},"Next"))))};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],i=!0,s=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C={id:0,title:"",publisher:"",author:"",genre:"",published_at:0,words_amount:0,price:0},P={items:[],itemsCount:0,pageNo:0,perPage:3,totalCount:0};const I=function(e){var t=O((0,n.useState)(P),2),r=t[0],a=t[1],o=function(e){a(P),s.getCollection("Book",e||P).then((function(e){return a(e)}))};(0,n.useEffect)((function(){r.pageNo||o()}),[]);return n.createElement("div",null,n.createElement("h2",null,"Books"),!r.pageNo&&n.createElement("div",{className:"books-layout-block-loader"},n.createElement(l,{height:"100%"})),n.createElement("div",{className:"books-layout-block"},r.pageNo>0&&n.createElement("div",{className:"books-layout-block-inner"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-3"},n.createElement("div",{className:"dropdown"},n.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},r.perPage," items per page"),n.createElement("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},[3,6,12,24].map((function(e,t){return n.createElement("li",{key:t},n.createElement("a",{className:"dropdown-item",href:"#",onClick:function(){e!==r.perPage&&o({perPage:e,pageNo:1})}},e))}))))),n.createElement("div",{className:"col-9"},n.createElement("div",{className:"text-end"},n.createElement(N,S(S({},r),{},{pageChange:function(e){r.pageNo!==e&&o({perPage:r.perPage,pageNo:e})},paginationCount:3}))))),n.createElement(h,{books:r,updateFromServer:o}),n.createElement("p",null,n.createElement("button",{className:"btn btn-success",onClick:function(){return f(C,(function(e){e.success?confirm("".concat(e.message,"\nUpdate books from server?"))&&o():alert(e.message)}))}},n.createElement("i",{className:"bi bi-cloud-plus-fill"})," Add book")))),n.createElement(p,null))};var x=document.getElementById("root");x&&(0,a.s)(x).render(n.createElement(I,null))}},e=>{e.O(0,[701],(()=>{return t=362,e(e.s=t);var t}));e.O()}]);